webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},s,!1,function(e){n("Ni5m")},null,null).exports,r=n("/ocq"),i=n("kxiW"),u=n.n(i),l={name:"Login",data:function(){return{email:"",password:"",error:"",success:""}},methods:{signIn:function(){var e=this;u.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(t){e.error="",e.success="Successfully logged in",e.$router.replace("menu")},function(t){e.success="",e.error="auth/user-not-found"===t.code?"User not found. Did you enter email and password correctly?":t.message,console.log(t)})}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-wrapper"},[n("div",{staticClass:"login"},[n("h3",[e._v("Sign In")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("br"),e._v(" "),n("button",{on:{click:e.signIn}},[e._v("Log In")]),e._v(" "),n("p",{staticClass:"error"},[e._v(e._s(e.error))]),e._v(" "),n("p",{staticClass:"success"},[e._v(e._s(e.success))]),e._v(" "),n("p",[e._v("No account? Create it "),n("router-link",{attrs:{to:"/sign-up"}},[e._v("here")]),e._v("!")],1)])])},staticRenderFns:[]},d=n("VU/8")(l,c,!1,null,null,null).exports,v={name:"SignUp",data:function(){return{email:"",password:"",error:"",success:""}},methods:{signUp:function(){var e=this;u.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(t){e.error="",e.success="Successfully registered. Log in now",e.$router.replace("menu")},function(t){e.success="",e.error=t.message})}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("h3",[e._v("Sign Up")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("br"),e._v(" "),n("button",{on:{click:e.signUp}},[e._v("Sign Up")]),e._v(" "),n("p",{staticClass:"error"},[e._v(e._s(e.error))]),e._v(" "),n("p",{staticClass:"success"},[e._v(e._s(e.success))]),e._v(" "),n("p",[e._v("Already have an account? Log in "),n("router-link",{attrs:{to:"/login"}},[e._v("here")]),e._v("!")],1)])},staticRenderFns:[]},m=n("VU/8")(v,p,!1,null,null,null).exports,h={name:"Main",data:function(){return{userTexts:null,email:u.a.auth().currentUser.email,newTextTitle:""}},firestore:function(){return{userTexts:U.collection("texts").where("author","==",u.a.auth().currentUser.uid)}},methods:{crop:function(e){return e.length>15?e.slice(0,15)+"...":e},logout:function(){var e=this;u.a.auth().signOut().then(function(){e.$router.replace("login")})},newDocument:function(){U.collection("texts").add({title:this.newTextTitle,value:"",author:u.a.auth().currentUser.uid,fontSize:20}),this.newTextTitle=""},removeText:function(e){confirm("Are you sure?")&&U.collection("texts").doc(e).delete()},editText:function(e){console.log(e)},downloadFile:function(e,t){e=e.replace(/[^a-z0-9]/gi,"_").toLowerCase();var n=document.createElement("a");n.setAttribute("href","data:text/plaincharset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-wrapper"},[n("div",{staticClass:"login"},[n("div",[e._v("\n      Hello "),n("b",[e._v(e._s(e.email))]),e._v("!\n    ")]),e._v(" "),e.userTexts?n("div",[e._v("\n      Select an existing document:\n      "),n("div",{staticClass:"list-wrapper"},[n("ol",e._l(e.userTexts,function(t){return n("li",{key:t.id},[e._v("\n            "+e._s(e.crop(t.title))+" "),n("router-link",{attrs:{to:"/editor/"+t.id}},[e._v("Edit")]),e._v(" "),n("a",{on:{click:function(n){e.removeText(t.id)}}},[e._v("Remove")]),e._v(" "),n("a",{on:{click:function(n){e.downloadFile(t.title,t.value)}}},[e._v("Download")])],1)}))]),e._v("\n      Or create a new one:\n      "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newTextTitle,expression:"newTextTitle"}],domProps:{value:e.newTextTitle},on:{input:function(t){t.target.composing||(e.newTextTitle=t.target.value)}}}),e._v(" "),n("button",{on:{click:e.newDocument}},[e._v("Create")])]):n("div",[n("br"),e._v("Loading")]),e._v(" "),n("br"),e._v(" "),n("button",{on:{click:e.logout}},[e._v("Log out")])])])},staticRenderFns:[]},g=n("VU/8")(h,f,!1,null,null,null).exports,_={name:"Editor",props:["id"],data:function(){return{text:{title:"",value:"",fontSize:20},lastTextChange:new Date,status:"saved"}},mounted:function(){var e=this;setInterval(function(){"not-saved"===e.status&&e.syncText()},1e4),setInterval(function(){"not-saved"===e.status&&new Date-e.lastTextChange>500&&e.syncText()},500)},firestore:function(){return{text:U.collection("texts").doc(this.id)}},methods:{preSyncText:function(){this.lastTextChange=new Date,this.status="not-saved"},syncText:function(){var e=this;this.status="saving",U.collection("texts").doc(this.id).set(this.text).then(function(){e.status="saved"}).catch(function(){e.status="not-saved"})}}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor"},[n("input",{attrs:{hidden:""},on:{keyup:function(t){return"button"in t||19===t.keyCode?e.syncText(t):null}}}),e._v(" "),n("input",{attrs:{hidden:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.syncText(t):null}}}),e._v(" "),n("div",{staticClass:"wrapper"},[n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text.title,expression:"text.title"}],staticClass:"header",attrs:{id:"header",rows:"1"},domProps:{value:e.text.title},on:{input:[function(t){t.target.composing||e.$set(e.text,"title",t.target.value)},e.preSyncText],change:e.syncText}}),e._v(" "),n("div",{staticClass:"save-info"},[n("button",{on:{click:function(t){e.text.fontSize+=5}}},[e._v("\n            +\n          ")]),e._v("\n          "+e._s(e.text.fontSize)+"\n          "),n("button",{on:{click:function(t){e.text.fontSize>=10&&(e.text.fontSize-=5)}}},[e._v("\n            -\n          ")]),e._v("\n          "+e._s("saved"===e.status?"Saved.":"saving"===e.status?"Saving..":"Not saved.")+"\n        ")])]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text.value,expression:"text.value"}],staticClass:"value-text",style:{fontSize:e.text.fontSize+"px"},domProps:{value:e.text.value},on:{input:[function(t){t.target.composing||e.$set(e.text,"value",t.target.value)},e.preSyncText],change:e.syncText}})])])},staticRenderFns:[]},w=n("VU/8")(_,x,!1,null,null,null).exports;a.a.use(r.a);var y=new r.a({routes:[{path:"*",redirect:"/login"},{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:d},{path:"/sign-up",name:"SignUp",component:m},{path:"/menu",name:"Main",component:g,meta:{requiresAuth:!0}},{path:"/editor/:id",name:"Edtor",component:w,props:!0,meta:{requiresAuth:!0}}]});y.beforeEach(function(e,t,n){var a=u.a.auth().currentUser,s=e.matched.some(function(e){return e.meta.requiresAuth});s&&!a?n("login"):!s&&a?n("menu"):n()});var T=y,b=n("hnaQ"),C=n("yviF"),S=n.n(C);n("881v");n.d(t,"db",function(){return U}),a.a.use(b.a);S.a.initializeApp({apiKey:"AIzaSyApcmJlfa9oUaulQoHfKWPBf6xs4VUkEGQ",authDomain:"zwebwriter.firebaseapp.com",databaseURL:"https://zwebwriter.firebaseio.com",projectId:"zwebwriter",storageBucket:"zwebwriter.appspot.com",messagingSenderId:"819725404170"}),a.a.config.productionTip=!1;var k=void 0;S.a.auth().onAuthStateChanged(function(e){k||(k=new a.a({el:"#app",router:T,components:{App:o},template:"<App/>"}))});var U=S.a.firestore()},Ni5m:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.02ea505741888098109f.js.map